<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Simon Johnson">
    <title>..:: MQTT-SN ::..</title>

    <!-- Bootstrap core CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
    <script src="/console/js/autocomplete.js"></script>

    <style>
        .bd-placeholder-img {
            font-size: 1.125rem;
            text-anchor: middle;
            -webkit-user-select: none;
            -moz-user-select: none;
            user-select: none;
        }

        @media (min-width: 768px) {
            .bd-placeholder-img-lg {
                font-size: 3.5rem;
            }
        }
    </style>
    <link href="/console/css/style.css" rel="stylesheet">
</head>
<body>

<header class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow">
    <a class="navbar-brand" href="#">
        <img src="/console/img/logo-no-background.png" alt="" height="40">
    </a>
    <a class="navbar-brand col-md-3 col-lg-2 me-0 px-3" href="#">Open Source MQTT-SN Gateway</a>
    <div class="container-fluid">
        <input class="form-control form-control-dark w-100" type="text" id="searchField" placeholder="Search sessions or topics..." aria-label="Search" autocomplete="off">
    </div>
</header>

<div class="container-fluid">
    <div class="row">
        <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
            <div class="position-sticky pt-3">
                <ul class="nav nav-pills flex-column">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="#" id="dashboardLink">
                            <span data-feather="activity"></span>
                            Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="clientsLink">
                            <span data-feather="lock"></span>
                            Clients
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="configLink">
                            <span data-feather="edit"></span>
                            Configuration
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="topicsLink">
                            <span data-feather="hash"></span>
                            Topics
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="backendLink">
                            <span data-feather="package"></span>
                            Backend (Connectors)
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="clusterLink">
                            <span data-feather="share-2"></span>
                            Cluster
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="systemLink">
                            <span data-feather="tool"></span>
                            System
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="settingsLink">
                            <span data-feather="settings"></span>
                            Settings
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="notificationsLink" disabled>
                            <span data-feather="send"></span>
                            Notifications
                        </a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="#" disabled>
                            <span data-feather="cloud"></span>
                            Mqtt-sn Cloud
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="docsLink">
                            <span data-feather="file-text"></span>
                            Documentation
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="">
                            <span data-feather="github"></span>
                            GitHub
                        </a>
                    </li>
                </ul>
            </div>
        </nav>
        <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
            <div class="container align-items-center flex-wrap justify-content-between" style="margin-top: 20px;" id="dyna">
                <!-- empty div -->
            </div>
        </main>
    </div>
</div>

<script>

    bindClick('#dashboardLink', "dashboard.html", true);
    bindClick('#clientsLink', "clients.html");
    bindClick('#configLink', "config.html");
    bindClick('#topicsLink', "topics.html");
    bindClick('#clusterLink', "cluster.html");
    bindClick('#settingsLink', "settings.html");
    bindClick('#docsLink', "docs.html");
    bindClick('#backendLink', "backend.html");
    bindClick('#systemLink', "system.html");

    function bindClick(selector, page, loadnow = false){
        $(selector).click(function() {
            $.ajax({
                url: "/console/async?page=" + page,
                success: function( result ) {
                    $("#dyna").html(result);
                }
            });
            $('.nav li a').removeClass('active');
            $(this).toggleClass('active');
        });
        if(loadnow){
            $(selector).click();
        }
    }


    const field = document.getElementById('searchField');
    const ac = new Autocomplete(field, {
        data: [{label: "I'm a label", value: 42}],
        maximumItems: 10,
        threshold: 2,
        onSelectItem: ({label, value}) => {
            alert("simon");
        },
        onInput: (value) => {
            console.log("user input: ", value);
            $.getJSON("/console/search?searchTerm=" + value, function (update){
                console.log("recieved: ", value);
                ac.setData(update);
                ac.renderIfNeeded();
            });
        }
    });


</script>


<script src="https://cdn.jsdelivr.net/npm/feather-icons@4.28.0/dist/feather.min.js" integrity="sha384-uO3SXW5IuS1ZpFPKugNNWqTZRRglnUJK6UAZ/gxOX80nxEkN9NcGZTftn6RzhGWE" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js" integrity="sha512-ElRFoEQdI5Ht6kZvyzXhYG9NqjtkmlkfYk0wr6wHxU9JEHakS7UJZNeml5ALk+8IKlU6jDgMabC3vkumRokgJA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
<script src="/console/js/script.js"></script>
<script>
    feather.replace();
</script>
</body>
</html>